// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String    @id @default(uuid())
  email     String    @unique
  password  String
  firstName String?
  lastName  String?
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  isDeleted Boolean     @default(false)
  userRoles UserRole[]
  flightForms FlightForm[]
}

model Role {
  id        Int       @id @default(autoincrement())
  name      String
  userRoles UserRole[]
}

model UserRole {
  userId String
  user   User   @relation(fields: [userId], references: [id])

  roleId Int
  role   Role   @relation(fields: [roleId], references: [id])

  @@id([userId, roleId])
}

model FlightForm {
  id                       Int      @id @default(autoincrement())
  airportDeparture         String?
  finalDestination         String?
  hasConnectingFlights     Boolean?
  connectingFlights        Json?
  departureDate            DateTime?
  airlineName              String?
  flightNumber             String?
  reasonForDelay           String?
  timeArrived              String?
  airlineDisruptionReason  String?
  disruptionDescription    String?
  firstName                String?
  lastName                 String?
  birthdate                DateTime?
  email                    String?
  confirmEmail             String?
  address                  String?
  city                     String?
  country                  String?
  phoneNumber              String?
  passengers               Json?
  formFourString           String?
  bookingReference         String?
  userId                   String?
  user                     User?      @relation(fields: [userId], references: [id])
  progress                 Int       @default(0) // Track progress with default value of 0
}